### Makefile for the sim project
### Generated by Bluespec Workstation on Wed Jun 21 19:49:42 IST 2017

default: full_clean compile link simulate

.PHONY: compile
compile:
	@echo Compiling...
	bsc -u -sim -simdir . -bdir . -info-dir . -keep-fires -p %/Prelude:%/Libraries:./../src:./../data:%/Libraries/BlueNoC -g mkTestBench  ../src/Testbench.bsv 
	@echo Compilation finished

.PHONY: link
link:
	@echo Linking...
	bsc -e mkTestBench -sim -o ./out -simdir . -p %/Prelude:%/Libraries:./../src:./../data:%/Libraries/BlueNoC -bdir . -keep-fires 
	@echo Linking finished

.PHONY: simulate
simulate:
	@echo Simulation...
	./out -m 1000
	@echo Simulation finished

.PHONY: clean
clean:
	exec rm -f ./ProcTypes.bo ./Def.bo ./Lookup.bo ./DataMem.bo ./InstMem.bo ./Node.bo ./Processor.bo ./NetConnect.bo ./MemTypes.bo ./NoCTypes.bo ./Core.bo ./System.bo ./Testbench.bo
	exec rm -f ./mkCore.ba ./mkSystem.ba ./mkTestBench.ba ./mkDmem.ba ./mkImem.ba ./mkNode.ba ./mkProc.ba ./mkNetConnect.ba

.PHONY: full_clean
full_clean:
	rm -f ./ProcTypes.bo ./Def.bo ./Lookup.bo ./DataMem.bo ./InstMem.bo ./Node.bo ./Processor.bo ./NetConnect.bo ./MemTypes.bo ./NoCTypes.bo ./Core.bo ./System.bo ./Testbench.bo
	rm -f ./mkCore.ba ./mkSystem.ba ./mkTestBench.ba ./mkDmem.ba ./mkImem.ba ./mkNode.ba ./mkProc.ba ./mkNetConnect.ba
	rm -f ./mkCore.h
	rm -f ./mkCore.cxx
	rm -f ./mkSystem.h
	rm -f ./mkSystem.cxx
	rm -f ./mkTestBench.h ./model_mkTestBench.h
	rm -f ./mkTestBench.cxx ./model_mkTestBench.cxx
	rm -f ./mkDmem.h
	rm -f ./mkDmem.cxx
	rm -f ./mkImem.h
	rm -f ./mkImem.cxx
	rm -f ./mkNode.h
	rm -f ./mkNode.cxx
	rm -f ./mkProc.h
	rm -f ./mkProc.cxx
	rm -f ./mkNetConnect.h
	rm -f ./mkNetConnect.cxx
